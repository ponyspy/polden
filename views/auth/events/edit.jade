extends ../../layout

block title
	title РЕДАКТИРОВАТЬ СОБЫТИЕ

block content_style
	link(rel='stylesheet', type='text/css', href='/build/css/add.css')

block content_scripts
	script(type='text/javascript', src='/build/js/add.js')

block content
	- var year = new Date()
	- year = year.getFullYear()
	- var months = ['ЯНВАРЬ', 'ФЕВРАЛЬ', 'МАРТ', 'АПРЕЛЬ', 'МАЙ', 'ИЮНЬ', 'ИЮЛЬ', 'АВГУСТ', 'СЕНТЯБРЬ', 'ОКТЯБРЬ', 'НОЯБРЬ', 'ДЕКАБРЬ']
	.form_block
		a.back_link(href='/auth/events') < Назад
		.title РЕДАКТИРОВАТЬ СОБЫТИЕ
		form(action="", method="post")
			.form_title Заголовок:
			input.ru(type="text", name="ru[title]", value=event.title.ru)
			input.en(type="text", name="en[title]", disabled)
			.form_title Зал:
			input.ru(type="text", name="ru[hall]", value=event.hall.ru)
			input.en(type="text", name="en[hall]", disabled)
			.form_title Описание:
			textarea.ru(name="ru[description]", rows="8",)= event.description.ru
			textarea.en(name="en[description]", rows="8", disabled)
			.form_title Возраст:
			input.ru(type="text", name="ru[age]", value=event.age.ru)
			input.en(type="text", name="en[age]", disabled)
			.form_title Категория:
			select(name='category')
				option(value='children') детский праздник
				option(value='tour') экскурсия
				option(value='writers') встреча с писателями
				option(value='music') музыка
				option(value='master_class') мастер-класс/студия
				option(value='literature') литературное занятие
				option(value='lecture') лекция
				option(value='roundtable') круглый стол
				option(value='film') кинопоказ
				option(value='filmstrip') диафильм
				option(value='animation') мультипликация
				option(value='animation_lecture') мультипликация/лекция
				option(value='recital') творческий вечер
				//- .form_title Фото:
				//- input(type="file", name="photo")
			.form_title Расписание:
			if event.schedule.length > 0
				each date in event.schedule
					.snake
						button.back(type='button') удалить
						b= ' | '
						b Дата:
						- var now = new Date()
						select(name='schedule[date][]')
							option(value='') День
							- for (var i=1; i<32; i++)
								option(value=i, selected=(i == date.getDate()))= i
						b /
						select(name='schedule[month][]')
							option(value='') Месяц
							each month, i in months
								option(value=i, selected=(i == date.getMonth()))= month
						b /
						select(name='schedule[year][]')
							option(value='') Год
							option(value=year, selected=(year == now.getFullYear()))= year
							option(value=year - 1, selected=(year - 1 == now.getFullYear()))= year - 1
						b Время:
						select(name='schedule[hours][]')
							option(value='') Часы
							- for (var i=0; i<24; i++)
								option(value=i, selected=(i == date.getHours()))= i
						b :
						select(name='schedule[minutes][]')
							option(value='') Минуты
							- for (var i=0; i<60; i+=10)
								option(value=i, selected=(i == date.getMinutes()))= i
						br
						br
			else
				.snake
					button.back(type='button') удалить
					b= ' | '
					b Дата:
					- var now = new Date()
					select(name='schedule[date][]')
						option(value='') День
						- for (var i=1; i<32; i++)
							option(value=i,)= i
					b /
					select(name='schedule[month][]')
						option(value='') Месяц
						each month, i in months
							option(value=i,)= month
					b /
					select(name='schedule[year][]')
						option(value='') Год
						option(value=year, selected=(year == now.getFullYear()))= year
						option(value=year - 1, selected=(year - 1 == now.getFullYear()))= year - 1
					b Время:
					select(name='schedule[hours][]')
						option(value='') Часы
						- for (var i=0; i<24; i++)
							option(value=i,)= i
					b :
					select(name='schedule[minutes][]')
						option(value='') Минуты
						- for (var i=0; i<60; i+=10)
							option(value=i,)= i
					br
					br
			button(type='button').forward добавить дату
			br
			br
			input(type='submit', value='отправить')